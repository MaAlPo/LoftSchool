Задание 1.
-вопрос с кодировками не решён

Задание 2.
-кодировки
-csv, json в скачаном файле добавляется разметка
-xml не скачивается, а выводится на экран